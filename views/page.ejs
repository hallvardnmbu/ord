<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Orden</title>
        <link rel="stylesheet" href="/style.css" />
    </head>
    <body>
        <header>
            <p>Heisann!</p>
        </header>

        <main id="words">
            <% if (words && words.length > 0) { %>
                <% words.forEach(function(item) { %>
                    <section>
                        <div class="word"><%= item.word %></div>

                        <div class="group"><%= item.group %></div>

                        <% item.definitions.forEach(function(definition) { %>
                            <% if (definition.text) { %>
                                <div class="definition">
                                    <%= definition.type %>: <%= definition.text %>
                                </div>
                            <% } %>
                        <% }); %>

                        <% item.etymology.forEach(function(etymology) { %>
                            <% if (etymology.text) { %>
                                <div class="etymology">
                                    <%= etymology.text %>
                                </div>
                            <% } %>
                        <% }); %>

                        <% item.lemmas.forEach(function(lemma) { %>
                            <% if (lemma.inflection) { %>
                                <table class="inflection" style="display: none;">
                                    <tbody>
                                        <% lemma.inflection.inflections.forEach(function(inflect) { %>
                                            <% if (inflect.word_form) { %>
                                                <tr>
                                                    <td class="word-cell"><%= inflect.word_form %></td>
                                                    <td class="form-cell"><%= inflect.tags ? inflect.tags.join(' ') : '' %></td>
                                                </tr>
                                            <% } %>
                                        <% }); %>
                                    </tbody>
                                </table>
                            <% } %>
                        <% }); %>

                        <button id="toggleInflection" onclick="toggleInflection()">Vis bøyninger</button>

                        <script>
                        function toggleInflection() {
                            const button = document.getElementById('toggleInflection');
                            button.textContent = button.textContent === 'Vis bøyninger' ? 'Skjul bøyninger' : 'Vis bøyninger';
                            const inflections = document.querySelectorAll('.inflection');
                            inflections.forEach((inflection) => {
                                inflection.style.display = inflection.style.display === 'table' ? 'none' : 'table';
                            });
                        }
                        </script>
                    </section>
                <% }); %>
            <% } else { %>
                <section>Noe gikk galt.</section>
            <% } %>

            <% if (error) { %>
                <section class="error">
                    Noe gikk galt: <%= error %>
                </section>
            <% } %>
        </main>

        <footer>
            <p>(C) <a href="https://dilettant.no" target="_blank">Hallvard H. Lavik</a></p>
        </footer>
    </body>
</html>
